<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help Guide - DataJam Installer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/installation/style.css?v=2.1">
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <style>
        .help-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }
        .help-section h2 {
            color: var(--datajam-pink);
            margin-bottom: 16px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .help-section h3 {
            color: var(--text-primary);
            margin: 20px 0 12px 0;
            font-size: 16px;
        }
        .help-section p, .help-section li {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 12px;
        }
        .help-section ul, .help-section ol {
            padding-left: 24px;
            margin-bottom: 16px;
        }
        .help-section li {
            margin-bottom: 8px;
        }
        .status-example {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }
        .workflow-step {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 20px;
            padding: 16px;
            background: var(--bg-primary);
            border-radius: 8px;
        }
        .workflow-number {
            background: linear-gradient(135deg, #E62F6E, #E94B52);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            flex-shrink: 0;
        }
        .workflow-content h4 {
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .workflow-content p {
            margin-bottom: 0;
        }
        .tip-box {
            background: linear-gradient(135deg, rgba(230, 47, 110, 0.1), rgba(233, 75, 82, 0.1));
            border-left: 4px solid var(--datajam-pink);
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin: 16px 0;
        }
        .tip-box strong {
            color: var(--datajam-pink);
        }
        .key-point {
            background: rgba(20, 184, 166, 0.1);
            border-left: 4px solid #14B8A6;
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin: 16px 0;
        }
        .key-point strong {
            color: #14B8A6;
        }
        .toc {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 24px;
        }
        .toc h3 {
            margin-bottom: 12px;
            color: var(--text-primary);
        }
        .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .toc li {
            margin-bottom: 8px;
        }
        .toc a {
            color: var(--datajam-orange);
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <div class="logo">
                <img src="/installation/logo-gradient.png" alt="DataJam" class="logo-image">
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Dashboard
                </a>
                <a href="/installation/index.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                    New Install
                </a>
                <a href="installations.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                    View Installs
                </a>
                <a href="inventory.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2"/>
                        <path d="M16 3h2a2 2 0 0 1 2 2v2M8 3H6a2 2 0 0 0-2 2v2"/>
                        <line x1="12" y1="11" x2="12" y2="17"/>
                        <line x1="9" y1="14" x2="15" y2="14"/>
                    </svg>
                    Inventory
                </a>
                <a href="projects.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    Projects
                </a>
                <a href="users.html" class="admin-only">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    Users
                </a>
                <a href="settings.html">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                    </svg>
                    Settings
                </a>
                <a href="help.html" class="active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Help Guide
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="currentUserName">User</div>
                        <div class="user-role" id="currentUserRole">Loading...</div>
                    </div>
                </div>
                <button class="logout-btn" onclick="SessionManager.logout()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    Logout
                </button>
            </div>
        </aside>

        <main class="main-content">
            <div style="margin-bottom: 32px;">
                <h1>Help Guide</h1>
                <p class="subtitle">How to use the DataJam Installer Portal</p>
            </div>

            <!-- Table of Contents -->
            <div class="toc">
                <h3>Quick Navigation</h3>
                <ul>
                    <li><a href="#overview">Overview - How It All Works</a></li>
                    <li><a href="#jambox-lifecycle">JamBox Lifecycle (The Journey of a Device)</a></li>
                    <li><a href="#adding-jamboxes">Adding JamBoxes to the Registry</a></li>
                    <li><a href="#creating-shipments">Creating Shipments</a></li>
                    <li><a href="#recording-installations">Recording Installations</a></li>
                    <li><a href="#tracking-status">Tracking JamBox Status</a></li>
                    <li><a href="#cables">Cable Stock Management</a></li>
                    <li><a href="#tips">Tips & Best Practices</a></li>
                </ul>
            </div>

            <!-- Overview Section -->
            <div class="help-section" id="overview">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                    Overview - How It All Works
                </h2>
                <p>The Installer Portal helps you track <strong>every JamBox device</strong> from the moment it arrives in stock until it's installed and live at a client site.</p>

                <div class="key-point">
                    <strong>Key Concept:</strong> Each JamBox has a unique ID (printed on the device). You register this ID in the system, and then the system tracks where it goes - when it's shipped, and when it's installed.
                </div>

                <h3>The Three Main Areas:</h3>
                <ul>
                    <li><strong>JamBox Registry</strong> - Where you register each physical device by its ID</li>
                    <li><strong>Shipments</strong> - Track which JamBoxes are sent to which projects</li>
                    <li><strong>Installations</strong> - Record when a JamBox is physically installed</li>
                </ul>

                <p>When you ship JamBoxes, they're automatically marked as "Shipped". When you record an installation, the JamBox is automatically marked as "Installed". No double-entry needed!</p>
            </div>

            <!-- JamBox Lifecycle -->
            <div class="help-section" id="jambox-lifecycle">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    JamBox Lifecycle (The Journey of a Device)
                </h2>
                <p>Every JamBox goes through these stages:</p>

                <div class="workflow-step">
                    <div class="workflow-number">1</div>
                    <div class="workflow-content">
                        <h4>
                            <span class="status-example" style="background: rgba(107, 114, 128, 0.2); color: #6B7280;">In Stock</span>
                        </h4>
                        <p>Device arrives, you add it to the registry. It sits in the warehouse ready to be deployed.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="workflow-number">2</div>
                    <div class="workflow-content">
                        <h4>
                            <span class="status-example" style="background: rgba(245, 158, 11, 0.2); color: #F59E0B;">Shipped</span>
                        </h4>
                        <p>You create a shipment to a project/client. The JamBox is now en-route or waiting at the site for installation.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="workflow-number">3</div>
                    <div class="workflow-content">
                        <h4>
                            <span class="status-example" style="background: rgba(59, 130, 246, 0.2); color: #3B82F6;">Installed</span>
                        </h4>
                        <p>You record the installation. The JamBox is physically mounted and connected at the venue.</p>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="workflow-number">4</div>
                    <div class="workflow-content">
                        <h4>
                            <span class="status-example" style="background: rgba(16, 185, 129, 0.2); color: #10B981;">Active</span>
                        </h4>
                        <p>The device is live and reporting data to the DataJam Portal. Set this status when the device is confirmed working.</p>
                    </div>
                </div>

                <div class="tip-box">
                    <strong>What about faulty devices?</strong> If a JamBox is damaged or returned, you can manually change its status to "Faulty" in the registry. This takes it out of the available pool.
                </div>
            </div>

            <!-- Adding JamBoxes -->
            <div class="help-section" id="adding-jamboxes">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2"/>
                        <path d="M16 3h2a2 2 0 0 1 2 2v2M8 3H6a2 2 0 0 0-2 2v2"/>
                        <line x1="12" y1="11" x2="12" y2="17"/>
                        <line x1="9" y1="14" x2="15" y2="14"/>
                    </svg>
                    Adding JamBoxes to the Registry
                </h2>

                <h3>When to add a JamBox:</h3>
                <p>Add each JamBox to the registry when it arrives at the warehouse. This creates a record that follows the device throughout its lifecycle.</p>

                <h3>How to add:</h3>
                <ol>
                    <li>Go to <strong>Inventory</strong> > <strong>JamBox Registry</strong> tab</li>
                    <li>Click the <strong>"Add JamBox"</strong> button</li>
                    <li>Enter the <strong>JamBox ID</strong> exactly as printed on the device (e.g., "JB-0001" or "DJM-2024-001")</li>
                    <li>Set status to <strong>"In Stock"</strong></li>
                    <li>Add any notes (optional) - e.g., "Batch received Dec 2024"</li>
                    <li>Click <strong>"Add to Registry"</strong></li>
                </ol>

                <div class="key-point">
                    <strong>Important:</strong> The JamBox ID must match what's printed on the physical device. This is how you'll track it later!
                </div>

                <h3>Bulk adding multiple JamBoxes:</h3>
                <p>When you receive a batch of devices, use <strong>Bulk Add</strong> to add up to 500 at once:</p>
                <ol>
                    <li>Go to <strong>Inventory</strong> > <strong>JamBox Registry</strong> tab</li>
                    <li>Click the <strong>"Bulk Add"</strong> button</li>
                    <li>Enter all JamBox IDs, <strong>one per line</strong></li>
                    <li>Set the status (usually "In Stock")</li>
                    <li>Add a note like "Batch received Dec 2024"</li>
                    <li>Click <strong>"Add All to Registry"</strong></li>
                </ol>

                <div class="tip-box">
                    <strong>Pro tip:</strong> If you have the IDs in a spreadsheet, copy the column and paste directly into the text box. The system will handle one ID per line automatically.
                </div>
            </div>

            <!-- Creating Shipments -->
            <div class="help-section" id="creating-shipments">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="3" width="15" height="13"/>
                        <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
                        <circle cx="5.5" cy="18.5" r="2.5"/>
                        <circle cx="18.5" cy="18.5" r="2.5"/>
                    </svg>
                    Creating Shipments
                </h2>
                <p>When you're sending JamBoxes to a client or project, create a shipment to track exactly which devices are going where.</p>

                <h3>How to create a shipment:</h3>
                <ol>
                    <li>Go to <strong>Inventory</strong> > <strong>Active Shipments</strong> tab</li>
                    <li>Select the <strong>Destination/Project</strong> from the dropdown (or enter a custom name)</li>
                    <li>Set the <strong>Shipment Date</strong></li>
                    <li><strong>Select JamBoxes</strong> - tick the checkboxes for each device you're shipping
                        <ul>
                            <li>Only "In Stock" JamBoxes are shown</li>
                            <li>Use "Select All" for bulk selection</li>
                        </ul>
                    </li>
                    <li>Enter <strong>Cable Quantity</strong> if sending cables</li>
                    <li>Add <strong>Shipping Notes</strong> (tracking number, carrier, etc.)</li>
                    <li>Click <strong>"Create Shipment"</strong></li>
                </ol>

                <div class="tip-box">
                    <strong>Automatic Status Update:</strong> When you create a shipment, all selected JamBoxes are automatically changed to "Shipped" status. You don't need to update them manually!
                </div>

                <h3>Marking shipments as delivered:</h3>
                <p>Once the shipment arrives at the destination, click <strong>"Mark as Delivered"</strong> on the shipment card. This moves it to the Delivered tab for your records.</p>
            </div>

            <!-- Recording Installations -->
            <div class="help-section" id="recording-installations">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                    Recording Installations
                </h2>
                <p>When you physically install a JamBox at a venue, record it in the system.</p>

                <h3>How the JamBox autocomplete works:</h3>
                <ol>
                    <li>Go to <strong>New Install</strong></li>
                    <li>Fill in venue and location details</li>
                    <li><strong>Select a Project</strong> - this filters the JamBox suggestions to show devices shipped to that project first</li>
                    <li>In the <strong>JamBox ID</strong> field, start typing or click to see suggestions
                        <ul>
                            <li>Devices shipped to your selected project appear first</li>
                            <li>Other shipped devices are also shown</li>
                            <li>The hint shows the device status (e.g., "Shipped to Limited Space")</li>
                        </ul>
                    </li>
                    <li>Complete the rest of the form (WiFi, photos, etc.)</li>
                    <li>Click <strong>"Save Installation"</strong></li>
                </ol>

                <div class="key-point">
                    <strong>Automatic Status Update:</strong> When you save an installation with a JamBox ID, that device is automatically marked as "Installed" in the registry. The system links the installation record to the JamBox.
                </div>

                <div class="tip-box">
                    <strong>Can't find the JamBox?</strong> If the JamBox ID isn't in the dropdown, you can still type it manually. The system will show "New JamBox ID (not in registry)" - this is fine for devices not yet registered.
                </div>
            </div>

            <!-- Tracking Status -->
            <div class="help-section" id="tracking-status">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    Tracking JamBox Status
                </h2>

                <h3>Quick status overview:</h3>
                <ul>
                    <li><strong>Dashboard</strong> - Shows total JamBoxes with breakdown (stock | shipped | installed | faulty)</li>
                    <li><strong>JamBox Registry</strong> - Full list with filter by status</li>
                </ul>

                <h3>To find a specific JamBox:</h3>
                <ol>
                    <li>Go to <strong>Inventory</strong> > <strong>JamBox Registry</strong></li>
                    <li>Use the <strong>Search</strong> box to type the JamBox ID</li>
                    <li>Or use the <strong>Filter</strong> dropdown to show only devices with a specific status</li>
                </ol>

                <h3>To change a JamBox status manually:</h3>
                <ol>
                    <li>Find the JamBox in the registry</li>
                    <li>Click <strong>"Edit"</strong></li>
                    <li>Change the status (e.g., mark as Faulty if damaged)</li>
                    <li>Add notes explaining why</li>
                    <li>Click <strong>"Save Changes"</strong></li>
                </ol>
            </div>

            <!-- Cables -->
            <div class="help-section" id="cables">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8h1a4 4 0 0 1 0 8h-1"/>
                        <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                        <line x1="6" y1="1" x2="6" y2="4"/>
                        <line x1="10" y1="1" x2="10" y2="4"/>
                        <line x1="14" y1="1" x2="14" y2="4"/>
                    </svg>
                    Cable Stock Management
                </h2>
                <p>Cables are tracked as simple quantities (bags of 10), not individual items like JamBoxes.</p>

                <h3>To add cable stock:</h3>
                <ol>
                    <li>Go to <strong>Inventory</strong> > <strong>Cable Stock</strong> tab</li>
                    <li>In the "Add Stock" form, select <strong>"Cable"</strong></li>
                    <li>Enter the <strong>Quantity</strong></li>
                    <li>Add any notes (e.g., "Order #12345")</li>
                    <li>Click <strong>"Add to Stock"</strong></li>
                </ol>

                <h3>Cable deduction:</h3>
                <p>When you create a shipment with cables, the quantity is automatically deducted from stock.</p>
            </div>

            <!-- Tips -->
            <div class="help-section" id="tips">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                    Tips & Best Practices
                </h2>

                <div class="tip-box">
                    <strong>Register JamBoxes as they arrive.</strong> Don't wait until you're shipping them. Adding devices to the registry when they arrive keeps your inventory accurate.
                </div>

                <div class="tip-box">
                    <strong>Always select the project when creating installations.</strong> This helps the autocomplete find the right JamBoxes and keeps your project data organized.
                </div>

                <div class="tip-box">
                    <strong>Use notes liberally.</strong> Add tracking numbers to shipments, batch info to JamBoxes, and any issues to installations. Future-you will thank you!
                </div>

                <div class="tip-box">
                    <strong>Check the History tab.</strong> The inventory history shows all stock movements - useful for auditing and troubleshooting.
                </div>

                <div class="key-point">
                    <strong>Need help?</strong> Contact Arran at arran@data-jam.com or call +44 7827 813388
                </div>
            </div>

            <!-- Back to Dashboard -->
            <div style="margin-top: 32px; text-align: center;">
                <a href="dashboard.html" class="btn-primary" style="text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Dashboard
                </a>
            </div>
        </main>
    </div>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/installation/config.js"></script>
    <script src="/installation/supabase-client.js"></script>
    <script src="/installation/app.js"></script>
    <script>
        // Populate user info in sidebar
        document.addEventListener('DOMContentLoaded', () => {
            const userNameEl = document.getElementById('currentUserName');
            const userRoleEl = document.getElementById('currentUserRole');

            if (userNameEl && SessionManager) {
                userNameEl.textContent = SessionManager.getCurrentUser();
            }
            if (userRoleEl && SessionManager) {
                const role = SessionManager.getUserRole() || 'user';
                userRoleEl.textContent = role;
            }
        });
    </script>
</body>
</html>
